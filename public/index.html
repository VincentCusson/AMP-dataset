<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>The AMP Dataset</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" sizes="16x16" href="favicon.png" />
	<link rel="stylesheet" href="app.css" />

	<script>	

		var urls = ["scoreC1.png","scoreS1.png"];
		var alts = ["scoreC1","scoreS1"];
		var index = 0;

		function GiveANewScore() {
			index ++;
			if(index >= urls.length) 
			{
				index = 0;
			}
			return { url: urls[index] , alt: alts[index]}; 
		}
		
	</script>
</head>

<body>
	<noscript>
		This app requires JavaScript.
	</noscript>

	<!--Title and presentation of the project-->
	<h2>The AMP dataset</h2>
	<p>A work in progress dataset of Amateur MIDI Performances crowdsourced over the web.</p>
	<p>This page allows you to contribute to the dataset by recording a short performance using any of your MIDI keyboard. </p>
	<p>Read more about this project <a href="url" style="color:#46729e">Here</a>.</p>

	<hr>

	<p>Your MIDI and survey data will be anonymized, preprocessed, and add to the dataset.</p>

	<!--User input elements-->

	<input class="styled-checkbox" id="styled-checkbox-4" type="checkbox" value="value4">
	<label for="styled-checkbox-4"><u>I have read and agree to the terms</u></label>

	<br>
	<hr>

	<h4>User Survey (optional)</h4>
	<form id="usersurvey">
		<label for="years">Years of experience:</label><br>
		<input type="text" id="years" name="years"><br>
		<label for="level">Your experience level [1-10]:</label><br>
		<input type="text" id="level" name="level"><br>
		<label for="genre">Preferred genre:</label><br>
		<input type="text" id="genre" name="genre"><br>
		<label for="hardw">MIDI hardware:</label><br>
		<input type="text" id="hardw" name="hardw">
	</form>

	<hr>


	<h4>Performance recording</h4>
	<p>Please play this short excerpt and click on the submit button when your are finish.</p>
	<label for="midiDevicesSelect">Midi Devices:</label>

	<select id="midiDevicesSelect">
	</select>

	<br>

	<!--Score visualization-->
	<img id="score" src="scoreS1.png" alt="musicPrompt">


	<br>
	<button class="btn" id="startrec"><span>Start recording</span></button>
	<button class="btn" id="submit"><span>Submit</span></button>

	<button class="btn" id="next" onclick="change_image()" ><span>One more..</span></button>

	<script>
		function change_image() {
			var newImagesdata = GiveANewScore();
			document.getElementById("score").src = newImagesdata.url;
			document.getElementById("score").alt = newImagesdata.alt;
			document.querySelector('#startrec').innerText = 'Start recording';}
	</script>



	<!--Piano visualization-->
	<script src="theory-reference.js"></script>
	<script src="dom-piano.js"></script>

	<div class="piano">
		<div id="key-scores">
		</div>
		<div id="piano-keys">
		</div>
	</div>

	<script>
	const noteReference = new NoteReference()
	//const domPiano = new DomPiano(0,8,noteReference)
	//this.domPiano = domPiano
	</script>

	<!--Sound-->
	<!-- polyfill -->
	<script src="MIDI.js-master/inc/shim/Base64.js" type="text/javascript"></script>
	<script src="MIDI.js-master/inc/shim/Base64binary.js" type="text/javascript"></script>
	<script src="MIDI.js-master/inc/shim/WebAudioAPI.js" type="text/javascript"></script>
	<!-- midi.js package -->
	<script src="MIDI.js-master/js/midi/audioDetect.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/midi/gm.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/midi/loader.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/midi/plugin.audiotag.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/midi/plugin.webaudio.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/midi/plugin.webmidi.js" type="text/javascript"></script>
	<!-- utils -->
	<script src="MIDI.js-master/js/util/dom_request_xhr.js" type="text/javascript"></script>
	<script src="MIDI.js-master/js/util/dom_request_script.js" type="text/javascript"></script>


	<!--Lib and files importing-->
	<script type = "text/javascript"
	src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="lib/FileSaver.js"></script>
	<script src="lib/SimpleMidiInput.js"></script>
	<script src="lib/midifile/MIDIEvents.js"></script>
	<script src="lib/midifile/MIDIFile.js"></script>
	<script src="lib/coffeescript.js"></script>
	<script src="app.coffee" type="text/coffeescript"></script>

</body>
</html>
